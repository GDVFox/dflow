# üåä DFlow

[![GoPkg Widget]][GoPkg]

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.  
–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑—ã–≤–∞—Ç—å —É–∑–ª—ã –≥—Ä–∞—Ñ–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö, –ø—Ä–∏ —ç—Ç–æ–º –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–æ —Å—Ç–æ–∫–∞. 

## –û–±–∑–æ—Ä

–ì—Ä–∞—Ñ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä —É–∑–ª–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –∞—Ç–æ–º–∞—Ä–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–æ–±–æ–π —Ä–µ–±—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—é—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –î–∞–ª–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –î–µ–π—Å—Ç–≤–∏—è

–î–µ–π—Å—Ç–≤–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º —Å ¬´–≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º¬ª –ø—Ä–∏ –ø–æ–º–æ—â–∏ [—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤][Standard Streams].

–î–µ–π—Å—Ç–≤–∏—è —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Ä–µ–∞–ª–∏–∑—É—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ —Ä–∞–±–æ—Ç–µ –¥–µ–π—Å—Ç–≤–∏–π [—Ç—É—Ç](./runtime/README.ru.md).

### –°–≤—è–∑–∏

–î–µ–π—Å—Ç–≤–∏—è —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π —Ä–µ–±—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—é—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏ —ç—Ç–æ–º DFlow –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö *at-least-once*.

### –ì—Ä–∞—Ñ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è. –≠–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏–π, –∞ —Å–≤—è–∑–∏ –∑–∞–¥–∞—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏:

* `;` ‚Äî –∑–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π.
* `||` ‚Äî –∑–∞–¥–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π, –ø—Ä–∏ —ç—Ç–æ–º –≤—Ö–æ–¥—è—â–∏–π –ø–æ—Ç–æ–∫ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≤—Ö–æ–¥ –≤—Å–µ–º –¥–µ–π—Å—Ç–≤–∏—è–º.

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤, –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–æ–±–∫–∏. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã —Ä–∞–±–æ—Ç—ã –∏ –≥—Ä–∞—Ñ–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö [—Ç—É—Ç](./dflow/README.ru.md).

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã DFlow:

* meta_node: –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ API –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ —Ç–∞–∫–∂–µ –∫–æ–Ω—Ç—Ä–æ–ª—å –∑–∞ –≥—Ä–∞—Ñ–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ](./meta_node/README.ru.md).
* machine_node: –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ, —Å–ª—É–∂–∏—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞/–∫–æ–Ω—Ç—Ä–æ–ª—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ](./machine_node/README.ru.md).
* runtime: –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º, –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö, –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ–º –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ](./runtime/README.ru.md).
* dflow: –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å meta_node, –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ](./dflow/README.ru.md).

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ [Go 1.16][Go Install] –∏ [etcd][ETCD Install]. –ò—Ö –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —á–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã.

1. meta_node –∑–∞–≥—Ä—É–∂–∞–µ–º —Å –ø–æ–º–æ—â—å—é:

```bash
go get -u github.com/GDVFox/dflow/meta_node/.../
```

2. machine_node –∑–∞–≥—Ä—É–∂–∞–µ–º —Å –ø–æ–º–æ—â—å—é:

```bash
go get -u github.com/GDVFox/dflow/machine_node/.../
```

3. runtime –∑–∞–≥—Ä—É–∂–∞–µ–º —Å –ø–æ–º–æ—â—å—é:

```bash
go get -u github.com/GDVFox/dflow/runtime/.../
```

4. dflow –∫–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ–º —Å –ø–æ–º–æ—â—å—é:

```bash
go get -u github.com/GDVFox/dflow/dflow/.../
```

*–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `GOPATH/bin`.*

#### –ó–∞–ø—É—Å–∫

–î–µ–π—Å—Ç–≤—É–µ–º –≤ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ etcd —É–∂–µ –∑–∞–ø—É—â–µ–Ω –≤ —Ä–µ–∂–∏–º–µ –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞ –ø–æ –∞–¥—Ä–µ—Å—É `127.0.0.1:2379`. *–í production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å etcd –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–∑–ª–æ–≤, dflow –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ–º—ã–º etcd.*

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ –ª–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤.

1. machine_node. –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞–µ–º machine_node –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω machine_node –ª–æ–∫–∞–ª—å–Ω–æ.  
–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ –ø—Ä–∏–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è [—Ç—É—Ç](./examples/configs/machine_node_config.yaml).  
–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ [machine_node](./machine_node/README.ru.md). –°–µ–π—á–∞—Å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É runtime –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `runtime-path`.

1. meta_node. –ó–∞–ø—É—Å–∫–∞–µ–º meta_node –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –ª–∏–±–æ –∂–µ –ª–æ–∫–∞–ª—å–Ω–æ.  
–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è [—Ç—É—Ç](./examples/configs/meta_node_config.yaml). –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ [meta_node](./meta_node/README.ru.md).

3. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –¥–µ–π—Å—Ç–≤–∏—è –∏–∑ –ø–∞–ø–∫–∏ examples/simplepipe/ –ø–æ–¥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–µ—Ä–≤–µ—Ä–∞. –í—Å–µ–≥–æ –ø–æ–ª—É—á–∏—Ç—Å—è 3 –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–∞: `num_gen`, `filter`, `printer`.

4. –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ dflow —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞:

```bash
dflow 127.0.0.1:5555 actions new -n num_gen -f <path_to_num_gen_binary>

dflow 127.0.0.1:5555 actions new -n filter -f <path_to_filter_binary>

dflow 127.0.0.1:5555 actions new -n printer -f <path_to_printer_binary>
```

5. –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ö–µ–º—É —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç:

```bash
dflow 127.0.0.1:5555 schemas new -f examples/simplepipe/simplepipe.yaml
```

6. –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ö–µ–º—É:

```bash
dflow 127.0.0.1:5555 schemas run -n simplepipe
```

7. –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞:

```bash
dflow 127.0.0.1:5555 schemas stop -n simplepipe
```

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–π —Å—Ö–µ–º—ã —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫ —á–∏—Å–µ–ª –∫—Ä–∞—Ç–Ω—ã—Ö 6, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–∏–≤—à–∏—Å—å –∫ `telnet 127.0.0.1 16016` –∏ —á–∏—Å–ª–∞, –∫—Ä–∞—Ç–Ω—ã–µ 2 –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ `telnet 127.0.0.1 12012`.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å—Ö–µ–º—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –ø–æ–º–æ—â—å—é –∑–∞–ø—Ä–æ—Å–∞: `http://127.0.0.1:5555/v1/schemas/simplepipe/dashboard?send_period=3s`.

–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π –≥—Ä–∞—Ñ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞–ª—Å—è –Ω–∞ —Ç—Ä–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö, —Ç–æ —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

<img src="https://raw.githubusercontent.com/GDVFox/staff/master/dflow/dflow.png">

## License

DFlow is licensed under MIT License.

[GoPkg]: https://pkg.go.dev/github.com/GDVFox/dflow
[GoPkg Widget]: https://pkg.go.dev/badge/GDVFox/dflow.svg
[Standard Streams]: https://www.gnu.org/software/libc/manual/html_node/Standard-Streams.html
[Go Install]: https://golang.org/doc/install
[ETCD Install]: https://etcd.io/
